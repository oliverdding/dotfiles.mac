#!/opt/local/bin/dash

set -e

CLIENT_POD=$(kubectl -n default get pods | grep client | head -1 | awk '{print $1}')
kubectl -n default exec $CLIENT_POD -- hdfs dfs -mkdir -p /tmp/oliverdding/
kubectl -n default exec $CLIENT_POD -- hdfs dfs -rm -f /tmp/oliverdding/QAPMSparkProject-assembly-6.1.jar
kubectl -n default cp $QAPM_HOME/emr/spark/scala/QAPMSparkProject/target/scala-2.11/QAPMSparkProject-assembly-6.1.jar $CLIENT_POD:/tmp/QAPM-Spark-jar-by-oliverdding
kubectl -n default exec $CLIENT_POD -- hdfs dfs -put /tmp/QAPM-Spark-jar-by-oliverdding /tmp/oliverdding/QAPMSparkProject-assembly-6.1.jar
